<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coraz√≥n 3D + Lluvia de frases</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#05050a;
  font-family: Arial, Helvetica, sans-serif;
  color:white;
}

/* T√çTULO */
.title{
  position:fixed;
  top:20px;
  width:100%;
  text-align:center;
  font-size:3rem;
  letter-spacing:4px;
  color:#ff2a6d;
  text-shadow:0 0 20px #ff2a6d;
  z-index:20;
  animation:pulse 3s infinite;
}
@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.05)}
}

/* THREE */
#scene{
  position:fixed;
  inset:0;
  z-index:1;
}

/* FRASES */
.phrase{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  padding:6px 12px;
  border-radius:10px;
  font-weight:bold;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  color:white;
  text-shadow:0 0 10px rgba(0,0,0,0.6);
  pointer-events:auto;
  z-index:10;
  will-change:transform,opacity;
}
</style>
</head>

<body>

<div class="title">I LOVE YOU</div>
<div id="scene"></div>

<script>
/* ==========================
   FRASES
========================== */
const PHRASES = [
  "Eres mi lugar favorito üíñ",
  "Contigo todo tiene sentido",
  "Mi coraz√≥n late por ti",
  "Siempre t√∫",
  "Amarte es f√°cil",
  "Eres mi paz",
  "Te elegir√≠a otra vez",
  "Mi amor eterno ‚ù§Ô∏è"
];

let phrases = [];
const MAX_PHRASES = 14;

/* ==========================
   THREE.JS
========================== */
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.z = 45;

let renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.getElementById('scene').appendChild(renderer.domElement);

/* LUCES */
scene.add(new THREE.AmbientLight(0xffffff, 0.3));
let light = new THREE.PointLight(0xff2a6d, 2, 120);
light.position.set(20,20,20);
scene.add(light);

/* CORAZ√ìN 3D */
const COUNT = 5000;
const positions = new Float32Array(COUNT*3);
const start = new Float32Array(COUNT*3);

function heart(t){
  t *= Math.PI*2;
  return {
    x:16*Math.pow(Math.sin(t),3),
    y:13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t),
    z:(Math.random()-0.5)*4
  }
}

for(let i=0;i<COUNT;i++){
  let p = heart(i/COUNT);
  positions[i*3]   = p.x;
  positions[i*3+1] = p.y;
  positions[i*3+2] = p.z;

  start[i*3]   = (Math.random()-0.5)*120;
  start[i*3+1] = (Math.random()-0.5)*120;
  start[i*3+2] = (Math.random()-0.5)*120;
}

let geometry = new THREE.BufferGeometry();
geometry.setAttribute('position', new THREE.BufferAttribute(start,3));
geometry.target = positions;

let material = new THREE.PointsMaterial({
  size:0.35,
  color:0xff2a6d,
  transparent:true,
  opacity:0.95,
  blending:THREE.AdditiveBlending
});

let heartPoints = new THREE.Points(geometry, material);
scene.add(heartPoints);

let progress = 0;

/* ==========================
   FRASES
========================== */
function spawnPhrase(x = Math.random()*innerWidth){
  if(phrases.length >= MAX_PHRASES) return;
  let el = document.createElement('div');
  el.className = 'phrase';
  el.textContent = PHRASES[Math.floor(Math.random()*PHRASES.length)];
  el.style.top = '-40px';
  el.style.left = x + 'px';
  document.body.appendChild(el);

  phrases.push({
    el,
    x,
    y:-40,
    vy:30 + Math.random()*40
  });
}

setInterval(()=>spawnPhrase(),600);

/* ==========================
   INTERACCI√ìN
========================== */
let pointer = {x:-999,y:-999};
addEventListener('mousemove',e=>{
  pointer.x=e.clientX;
  pointer.y=e.clientY;
});
addEventListener('click',e=>{
  spawnPhrase(e.clientX);
});

/* ==========================
   ANIMACI√ìN
========================== */
let clock = new THREE.Clock();

function animate(){
  requestAnimationFrame(animate);
  let t = clock.getElapsedTime();

  /* FORMAR CORAZ√ìN */
  progress = Math.min(1, progress + 0.004);
  let pos = geometry.attributes.position.array;
  let target = geometry.target;

  for(let i=0;i<pos.length;i++){
    pos[i] += (target[i]-pos[i]) * progress * 0.02;
  }
  geometry.attributes.position.needsUpdate = true;

  /* PULSO + ROTACI√ìN */
  let pulse = 1 + Math.sin(t*2)*0.05;
  heartPoints.scale.set(pulse,pulse,pulse);
  heartPoints.rotation.y += 0.002;
  heartPoints.rotation.x = Math.sin(t*0.5)*0.1;

  /* FRASES */
  for(let i=phrases.length-1;i>=0;i--){
    let p = phrases[i];
    p.y += p.vy * 0.016;
    p.el.style.transform = `translate(-50%, ${p.y}px)`;

    if(p.y > innerHeight+80){
      p.el.remove();
      phrases.splice(i,1);
    }
  }

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener('resize',()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>

</body>
</html>
